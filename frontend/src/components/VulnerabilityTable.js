import * as React from "react";
import MaterialTable from "material-table";
import { connect } from "react-redux";
import { withStyles } from "@material-ui/styles";
import Box from "@material-ui/core/Box";
import Paper from "@material-ui/core/Paper";
import LinearProgress from "@material-ui/core/LinearProgress";

const styles = theme => ({
  root: {
    width: "100%",
    overflow: "auto"
  }
});

const mapStateToProps = state => {
  return { perturbations: state.perturbations };
};

class VulnerabilityTable extends React.Component {
  render() {
    const columns = [
      {
        title: "Rank",
        field: "rank",
        cellStyle: {
          maxWidth: 50
        },
        headerStyle: {
          maxWidth: 50
        }
      },
      {
        title: "Node Name",
        field: "remove_id",
        cellStyle: {
          maxWidth: 200
        },
        headerStyle: {
          maxWidth: 200
        }
      },
      {
        title: "Vulnerability",
        field: "vul_percentile",
        cellStyle: {
          maxWidth: 200
        },
        headerStyle: {
          maxWidth: 200
        },
        render: rowData => (
          <LinearProgress
            variant="determinate"
            value={rowData.vul_percentile * 100}
          />
        )
      }
    ];
    return (
      <Box>
        <MaterialTable
          className={this.props.classes.root}
          columns={columns}
          data={this.props.perturbations}
          options={{
            minBodyHeight: 900,
            maxBodyHeight: 900,
            padding: "dense",
            showTitle: false,
            paging: false,
            searchFieldAlignment: "left",
            searchFieldStyle: {
              minWidth: 580,
              maxHeight: 30
            },
            headerStyle: {
              paddingTop: 0,
              paddingBottom: 10
            },
            actionsColumnIndex: 3,
            actionsCellStyle: {
              minWidth: 100
            }
          }}
        />
      </Box>
    );
  }
}

export default connect(mapStateToProps)(withStyles(styles)(VulnerabilityTable));
